"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2784],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var i=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,i,o=function(e,t){if(null==e)return{};var r,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=i.createContext({}),p=function(e){var t=i.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):n(n({},t),e)),r},c=function(e){var t=p(e.components);return i.createElement(l.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=p(r),m=o,d=h["".concat(l,".").concat(m)]||h[m]||u[m]||a;return r?i.createElement(d,n(n({ref:t},c),{},{components:r})):i.createElement(d,n({ref:t},c))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,n=new Array(a);n[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:o,n[1]=s;for(var p=2;p<a;p++)n[p]=r[p];return i.createElement.apply(null,n)}return i.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5404:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var i=r(7462),o=(r(7294),r(3905));const a={},n="Boiler Pico",s={unversionedId:"raspberry-pi/pico/boiler-pico",id:"raspberry-pi/pico/boiler-pico",title:"Boiler Pico",description:"I've been interested to monitor my home heating for a while. I had installed smart controls from Tado but wasn't happy that I couldn't access data from my own home outside of their app. I've been using Raspberry Pis for a variety of projects and also started to look at the Raspbberry Pi Pico. It's an interesting device, and more suitable than a full-blown compute module for many applications. I've had the idea of adding temperature sensors to the central heating pipes and monitoring them from a Pi, and hooking into my existing homelab Prometheus and Grafana instances to display the data. I can even send alerts using Grafana if I want to.",source:"@site/docs/raspberry-pi/pico/boiler-pico.md",sourceDirName:"raspberry-pi/pico",slug:"/raspberry-pi/pico/boiler-pico",permalink:"/docs/raspberry-pi/pico/boiler-pico",draft:!1,editUrl:"https://github.com/agarthetiger/docusaurus/tree/main/docs/raspberry-pi/pico/boiler-pico.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Raspberry Pico W",permalink:"/docs/raspberry-pi/pico/"},next:{title:"Using a Pico as a temperature and humidity sensor",permalink:"/docs/raspberry-pi/pico/pico-sensor"}},l={},p=[{value:"Hardware",id:"hardware",level:2},{value:"Software",id:"software",level:2},{value:"Build",id:"build",level:2},{value:"References",id:"references",level:2},{value:"Getting started",id:"getting-started",level:3},{value:"Reading sensors",id:"reading-sensors",level:3},{value:"Exporting metrics for Prometheus",id:"exporting-metrics-for-prometheus",level:3},{value:"Electronics and hardware assembbly",id:"electronics-and-hardware-assembbly",level:3},{value:"Reading WiFi signal strength",id:"reading-wifi-signal-strength",level:3}],c={toc:p};function h(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,i.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"boiler-pico"},"Boiler Pico"),(0,o.kt)("p",null,"I've been interested to monitor my home heating for a while. I had installed smart controls from Tado but wasn't happy that I couldn't access data from my own home outside of their app. I've been using Raspberry Pis for a variety of projects and also started to look at the Raspbberry Pi Pico. It's an interesting device, and more suitable than a full-blown compute module for many applications. I've had the idea of adding temperature sensors to the central heating pipes and monitoring them from a Pi, and hooking into my existing homelab Prometheus and Grafana instances to display the data. I can even send alerts using Grafana if I want to. "),(0,o.kt)("h2",{id:"hardware"},"Hardware"),(0,o.kt)("p",null,"For projects where I might have used a Pi to run a single python script a Pico may be more suitable. There is no OS to patch with security updates, I can run a micropython script with much faster startup time and the Pico W has WiFi 2.4GHz for wireless communication. Primarily I started looking at these because they were both cheap and available. I'm sure there are alternatives which have been around for a long time. However, I have two kids and very limited free time. I find the community around Raspberry Pis to be a great help, probably everything I want to do has already been done before, problems encountered and solved. At this point in my life this is a significant bonus. I have a spare Raspberry Pi Zero W from another project which I could repurpose for this project, but the more I think about it the more a single purpose microcontroller like a Pico is better suited to this job. "),(0,o.kt)("p",null,"In searching around for suitable temperature sensors the DS18B20 came up. I'm hoping these will prove suitable with a bit of thermal paste and insulation around the pipes and sensors. As long as the temperature readings are repeatable, I'd probably be ok with plus or minus a few degrees. I can see what the boiler says it's outputting for the water temperature which will be interesting to compare once this is built."),(0,o.kt)("p",null,"I2C, SPI and one-wire are all quite new to me, so it was good to find tutorials and guides explaining each of them and even a guide for interfacing multiple DS18B20 devices with a Pico, which is how I intend to build this system."),(0,o.kt)("h2",{id:"software"},"Software"),(0,o.kt)("p",null,"I've been building up micropython scripts to get familiar with using the Pico. From another Raspberry Pi 400, using Thonny is a great way to get started. I used to be a full-time software developer, using tools like VS Code and IntelliJ PyCharm daily. Compared to my experiences with MacOS and Arduino devices in the past which were decidedly painful, the Pi400 and Thonny are such a simple combination and do everything I need. Starting with the Raspberry Pi Pico official guide, flashing micropython onto the Pico was really well explained. No recompiling kernels or anything like that, it was literally drag-and-drop onto the Pico. It's impossible to brick a Pico, the bootloader firmware is in read-only memory so with a press of a hardware button you can always reflash a Pico. "),(0,o.kt)("p",null,"I ran through several tutorials starting from flashing the onboard LED to connecting to WiFi, reading the onboard package temperature and driving a small oled display. Moving on, I also found guides for setting up a basic webserver, and serving metrics in the OpenMetrics format which Prometheus can scrape. Feels like all the pieces are in place to begin to build this up. Problems can always crop up, but in theory this should all work together. Time to build the thing. "),(0,o.kt)("h2",{id:"build"},"Build"),(0,o.kt)("p",null,"Hopefully by the end of this weekend there will be something physical to show... tbc."),(0,o.kt)("p",null,"From left to right, bytearray addresses as mounted, "),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"b'($\\xb8Sa\"\\x07\\x88'), hex 28u24ub8u53u61u22u07u88"),(0,o.kt)("li",{parentName:"ol"},"b'(\\xe0#Ja\"\\x07\\xa7'), hex 28ue0u23u4au61u22u07ua7"),(0,o.kt)("li",{parentName:"ol"},"b'(\\xe2\\x81~T\"\\x08\\x95'), hex 28ue2u81u7eu54u22u08u95"),(0,o.kt)("li",{parentName:"ol"},"b'(\\xf7\\xa0sT\"\\x08\\x8d'), hex 28uf7ua0u73u54u22u08u8d"),(0,o.kt)("li",{parentName:"ol"},"b'(JPoT\"\\x08L'), hex 28u4au50u6fu54u22u08u4c")),(0,o.kt)("p",null,'Momentary switch leds, Vf 2.2v. 3.3v - 2.2v = 1.1v\n1.1v / 25mA == 1.1 / 0.025 = 44 ohm resistor required.\n... but Pi Hut said for this illuminated switch "220 to 1000 ohm resistor in series just as you would with any other LED to your 3V or higher power supply". Split the difference, 100 ohms looks fine, because splitting the difference is how electronics works... right? Joking aside, this worked but was felt overdriven so swapped for a 470 ohm instead which is a much more reasonable brightness. If only the product datasheet gave the recommended current for this button/led.'),(0,o.kt)("h2",{id:"references"},"References"),(0,o.kt)("p",null,"Thanks to the open source community who've made this project far more accessible to me by doing much of the heavy lifting and sharing. "),(0,o.kt)("h3",{id:"getting-started"},"Getting started"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.raspberrypi.com/documentation/microcontrollers/raspberry-pi-pico.html"},"https://www.raspberrypi.com/documentation/microcontrollers/raspberry-pi-pico.html"))),(0,o.kt)("h3",{id:"reading-sensors"},"Reading sensors"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://how2electronics.com/read-temperature-sensor-value-from-raspberry-pi-pico/"},"https://how2electronics.com/read-temperature-sensor-value-from-raspberry-pi-pico/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://how2electronics.com/interfacing-ds18b20-sensor-with-raspberry-pi-pico/"},"https://how2electronics.com/interfacing-ds18b20-sensor-with-raspberry-pi-pico/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.micropython.org/en/latest/esp8266/tutorial/onewire.html"},"https://docs.micropython.org/en/latest/esp8266/tutorial/onewire.html")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.micropython.org/en/v1.19.1/rp2/quickref.html#onewire-driver"},"https://docs.micropython.org/en/v1.19.1/rp2/quickref.html#onewire-driver")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://mpython.readthedocs.io/en/master/library/mPython/ds18x20.html"},"https://mpython.readthedocs.io/en/master/library/mPython/ds18x20.html")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://forum.micropython.org/viewtopic.php?t=2914"},"https://forum.micropython.org/viewtopic.php?t=2914"))),(0,o.kt)("h3",{id:"exporting-metrics-for-prometheus"},"Exporting metrics for Prometheus"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/leszekuchacz/KitronikBME688-picow-exporter"},"https://github.com/leszekuchacz/KitronikBME688-picow-exporter")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://sysdig.com/blog/prometheus-metrics/"},"https://sysdig.com/blog/prometheus-metrics/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/OpenObservability/OpenMetrics/blob/main/specification/OpenMetrics.md"},"https://github.com/OpenObservability/OpenMetrics/blob/main/specification/OpenMetrics.md")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://www.d3noob.org/2022/10/using-raspberry-pi-pico-with-prometheus.html"},"http://www.d3noob.org/2022/10/using-raspberry-pi-pico-with-prometheus.html"))),(0,o.kt)("h3",{id:"electronics-and-hardware-assembbly"},"Electronics and hardware assembbly"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.evilmadscientist.com/2012/resistors-for-leds/"},"https://www.evilmadscientist.com/2012/resistors-for-leds/")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://proto-pic.co.uk/product/crimp-connector-housings-2-54mm-0-1-dupont-compatible"},"https://proto-pic.co.uk/product/crimp-connector-housings-2-54mm-0-1-dupont-compatible"))),(0,o.kt)("h3",{id:"reading-wifi-signal-strength"},"Reading WiFi signal strength"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://forums.raspberrypi.com/viewtopic.php?t=341577"},"https://forums.raspberrypi.com/viewtopic.php?t=341577"))))}h.isMDXComponent=!0}}]);